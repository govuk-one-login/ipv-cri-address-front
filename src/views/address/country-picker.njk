
{% extends "base-form.njk" %}
{% from "hmpo-select/macro.njk" import hmpoSelect %}
{% block mainContent %}
<h1 class="govuk-heading-l">test</h1>
  {% call hmpoForm(ctx, {autocomplete:'on'}) %}

 {{ hmpoSelect(ctx, {
      id: "addressCountry",
      label: "Select your country or territory",
      hint: "",
      items: countries
    }) }}

{{ hmpoSubmit(ctx, {id: "continue", text: translate("buttons.next")}) }}

  {% endcall %}
<script id="govuk-script-analytics" nonce="{{ cspNonce }}" type="text/javascript"> 
console.log("1!")
  document.addEventListener('DOMContentLoaded', function() {
  console.log("2!")
    const initialiseAddressCountryAutocomplete = () => {
      var autocompleteScript = document.createElement('script')
      console.log("3")
      autocompleteScript.onload = function () {
        openregisterLocationPicker({
          selectElement: document.getElementById('addressCountry'),
          url: '/public/location-autocomplete-graph.json',
          autoselect: true,
          displayMenu: 'overlay'
        })
        console.log("4")
        document.getElementById('addressCountry').setAttribute('autocomplete', 'country-disabled-autocomplete')
      }
      console.log("5")
      autocompleteScript.setAttribute('type', 'text/javascript')
      autocompleteScript.setAttribute('src', '/public/location-autocomplete.min.js')
      document.getElementsByTagName('head')[0].appendChild(autocompleteScript)
      console.log("6")
    }
    initialiseAddressCountryAutocomplete()
  })
</script>

{% endblock %}
