{% extends "base-form.njk" %}
{% set hmpoPageKey = "addressSearch" %}
{% set hmpoPageContent = "addressSearch" %}
{% set gtmJourney = "address - start" %}

{% from "hmpo-form/macro.njk" import hmpoForm %}
{% from "hmpo-text/macro.njk" import hmpoText %}
{% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}

{% block mainContent %}

  <h1 id="header" class="govuk-heading-l">{{translate("pages.addressSearch.title")}} </h1>
  {% call hmpoForm(ctx) %}

{% if prepopulatedPostcode %}
{% from "govuk/components/inset-text/macro.njk" import govukInsetText %}

{{ govukInsetText({
  text: translate("pages.addressSearch.drivingLicence")
}) }}
{% endif %}

    {{ hmpoText(ctx, {
      id: "addressSearch",
      label: {
        key: translate(fields.addressSearch.label),
        classes: "govuk-label govuk-label--m"
      },
      classes: "govuk-!-width-one-half",
      hint:  translate("fields.addressSearch.hint")
    }) }}

    {{ hmpoSubmit(ctx, {id: "continue", text: translate("buttons.find-address")}) }}

  {% endcall %}
{% endblock %}

{% block bodyEnd %}
  {% block scripts %}
    <script type="text/javascript" src="/public/javascripts/cookies.js"></script>
    <script type="text/javascript" src="/public/javascripts/all.js"></script>
    <script type="text/javascript" src="/public/javascripts/application.js"></script>
    <script type="text/javascript" src="/public/analytics.js"></script>
    <script {% if cspNonce %} nonce='{{ cspNonce }}{%  endif %}'>
      window.DI.appInit({ga4ContainerId: "{{gtmId}}"})
      window
      .DI
      .analyticsGa4
      .pageViewTracker
      .trackOnPageLoad({
        statusCode: '{{ statusCode }}', // Access status code
        englishPageTitle: '{{ englishPageTitle }}',
        taxonomy_level1: '{{ taxonomyLevel1 }}', // Access taxonomy level 1
        taxonomy_level2: '{{ taxonomyLevel2 }}', // Access taxonomy level 2
        content_id: '{{contentId}}',
        logged_in_status: false,
        dynamic: false,
      });
    </script>
  {% endblock %}
{% endblock %}
